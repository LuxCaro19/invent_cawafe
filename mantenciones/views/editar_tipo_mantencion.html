{% extends "base_tarjeta.html" %}

{% block formulario_title %}Editar Tipo de Mantención{% endblock %}
{% block formulario_header %}Editar Tipo de Mantención{% endblock %}

{% block formulario_content %}
<form method="post" class="needs-validation" novalidate>
  {% csrf_token %}

  <!-- Nombre -->
  <div class="mb-3">
    <label for="id_nombre" class="form-label">Nombre</label>
    <input type="text" name="nombre" id="id_nombre" class="form-control" value="{{ form.nombre.value|default:'' }}">
    {% if form.nombre.errors %}
      <div class="text-danger">{{ form.nombre.errors.0 }}</div>
    {% endif %}
  </div>

  <!-- Frecuencia -->
  <div class="mb-3">
    <label for="id_frecuencia_dias" class="form-label">Frecuencia (días)</label>
    <input type="number" name="frecuencia_dias" id="id_frecuencia_dias" class="form-control" value="{{ form.frecuencia_dias.value|default:'' }}">
    {% if form.frecuencia_dias.errors %}
      <div class="text-danger">{{ form.frecuencia_dias.errors.0 }}</div>
    {% endif %}
  </div>

  <!-- Tareas asociadas -->
  <div class="mb-3">
    <label class="form-label">Tareas asociadas</label>
    <ul class="list-group mb-2">
      {% for tarea in tareas_asociadas %}
        <li class="list-group-item d-flex justify-content-between align-items-center">
          {{ tarea.nombre }}
          <!-- Aquí podrías agregar opción para eliminar la tarea si lo deseas -->
        </li>
      {% empty %}
        <li class="list-group-item text-muted">Este tipo de mantención no tiene tareas aún.</li>
      {% endfor %}
    </ul>
  </div>

  <!-- Añadir nueva tarea -->
  <div class="mb-3">
    <label for="nueva_tarea" class="form-label">Agregar nueva tarea</label>
    <select name="nueva_tarea" id="nueva_tarea" class="form-select">
      <option value="">Seleccione una tarea</option>
      {% for tarea in tareas_disponibles %}
        <option value="{{ tarea.id }}">{{ tarea.nombre }}</option>
      {% endfor %}
    </select>
  </div>

  <!-- Botones -->
  <div class="d-grid gap-2">
    <button type="submit" class="btn btn-primary">Guardar cambios</button>
  </div>
</form>
{% endblock %}
